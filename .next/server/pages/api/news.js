"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/news";
exports.ids = ["pages/api/news"];
exports.modules = {

/***/ "@next-auth/prisma-adapter":
/*!********************************************!*\
  !*** external "@next-auth/prisma-adapter" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("@next-auth/prisma-adapter");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "next-auth/providers/linkedin":
/*!***********************************************!*\
  !*** external "next-auth/providers/linkedin" ***!
  \***********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/linkedin");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "winston":
/*!**************************!*\
  !*** external "winston" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("winston");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

module.exports = import("uuid");;

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnews&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cnews%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnews&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cnews%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_news_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\news\\index.ts */ \"(api)/./src/pages/api/news/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_news_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_news_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_news_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_news_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/news\",\n        pathname: \"/api/news\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_news_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm5ld3MmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1Q25ld3MlNUNpbmRleC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUM4RDtBQUM5RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMseURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHlEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2VkdWNhdGlvbmFsLXBsYXRmb3JtLz85NDlhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmNcXFxccGFnZXNcXFxcYXBpXFxcXG5ld3NcXFxcaW5kZXgudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9uZXdzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbmV3c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnews&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cnews%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/logger.ts":
/*!***************************!*\
  !*** ./src/lib/logger.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logError: () => (/* binding */ logError),\n/* harmony export */   logRequest: () => (/* binding */ logRequest),\n/* harmony export */   logSecurityEvent: () => (/* binding */ logSecurityEvent),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n/* harmony import */ var winston__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! winston */ \"winston\");\n/* harmony import */ var winston__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(winston__WEBPACK_IMPORTED_MODULE_0__);\n\n// Log format\nconst logFormat = winston__WEBPACK_IMPORTED_MODULE_0___default().format.combine(winston__WEBPACK_IMPORTED_MODULE_0___default().format.timestamp(), winston__WEBPACK_IMPORTED_MODULE_0___default().format.errors({\n    stack: true\n}), winston__WEBPACK_IMPORTED_MODULE_0___default().format.json());\n// Create logger instance\nconst logger = winston__WEBPACK_IMPORTED_MODULE_0___default().createLogger({\n    level:  false ? 0 : \"debug\",\n    format: logFormat,\n    defaultMeta: {\n        service: \"api\"\n    },\n    transports: [\n        // Write all logs to console\n        new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).Console({\n            format: winston__WEBPACK_IMPORTED_MODULE_0___default().format.combine(winston__WEBPACK_IMPORTED_MODULE_0___default().format.colorize(), winston__WEBPACK_IMPORTED_MODULE_0___default().format.simple())\n        }),\n        // Write all logs with level 'error' and below to error.log\n        new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).File({\n            filename: \"logs/error.log\",\n            level: \"error\",\n            maxsize: 5242880,\n            maxFiles: 5\n        }),\n        // Write all logs with level 'info' and below to combined.log\n        new (winston__WEBPACK_IMPORTED_MODULE_0___default().transports).File({\n            filename: \"logs/combined.log\",\n            maxsize: 5242880,\n            maxFiles: 5\n        })\n    ]\n});\n// Request logging\nconst logRequest = (req)=>{\n    return {\n        method: req.method,\n        url: req.url,\n        query: req.query,\n        body: req.body,\n        user: req.user?.id,\n        ip: req.headers[\"x-forwarded-for\"] || req.socket.remoteAddress\n    };\n};\n// Error logging\nconst logError = (error, req)=>{\n    const errorLog = {\n        message: error.message,\n        stack: error.stack,\n        name: error.name\n    };\n    if (req) {\n        Object.assign(errorLog, logRequest(req));\n    }\n    return errorLog;\n};\nconst logSecurityEvent = (event, req, details = {})=>{\n    logger.warn({\n        message: event,\n        ...details,\n        path: req.url,\n        method: req.method,\n        ip: req.headers[\"x-forwarded-for\"] || req.socket.remoteAddress\n    });\n};\n// Export logger\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL2xvZ2dlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDOEI7QUFHOUIsYUFBYTtBQUNiLE1BQU1DLFlBQVlELHFEQUFjLENBQUNHLE9BQU8sQ0FDdENILHFEQUFjLENBQUNJLFNBQVMsSUFDeEJKLHFEQUFjLENBQUNLLE1BQU0sQ0FBQztJQUFFQyxPQUFPO0FBQUssSUFDcENOLHFEQUFjLENBQUNPLElBQUk7QUFHckIseUJBQXlCO0FBQ3pCLE1BQU1DLFNBQVNSLDJEQUFvQixDQUFDO0lBQ2xDVSxPQUFPQyxNQUF5QixHQUFlLElBQVM7SUFDeERULFFBQVFEO0lBQ1JXLGFBQWE7UUFBRUMsU0FBUztJQUFNO0lBQzlCQyxZQUFZO1FBQ1YsNEJBQTRCO1FBQzVCLElBQUlkLDJEQUFrQixDQUFDZSxPQUFPLENBQUM7WUFDN0JiLFFBQVFGLHFEQUFjLENBQUNHLE9BQU8sQ0FDNUJILHFEQUFjLENBQUNnQixRQUFRLElBQ3ZCaEIscURBQWMsQ0FBQ2lCLE1BQU07UUFFekI7UUFDQSwyREFBMkQ7UUFDM0QsSUFBSWpCLDJEQUFrQixDQUFDa0IsSUFBSSxDQUFDO1lBQzFCQyxVQUFVO1lBQ1ZULE9BQU87WUFDUFUsU0FBUztZQUNUQyxVQUFVO1FBQ1o7UUFDQSw2REFBNkQ7UUFDN0QsSUFBSXJCLDJEQUFrQixDQUFDa0IsSUFBSSxDQUFDO1lBQzFCQyxVQUFVO1lBQ1ZDLFNBQVM7WUFDVEMsVUFBVTtRQUNaO0tBQ0Q7QUFDSDtBQUVBLGtCQUFrQjtBQUNYLE1BQU1DLGFBQWEsQ0FBQ0M7SUFDekIsT0FBTztRQUNMQyxRQUFRRCxJQUFJQyxNQUFNO1FBQ2xCQyxLQUFLRixJQUFJRSxHQUFHO1FBQ1pDLE9BQU9ILElBQUlHLEtBQUs7UUFDaEJDLE1BQU1KLElBQUlJLElBQUk7UUFDZEMsTUFBTUwsSUFBSUssSUFBSSxFQUFFQztRQUNoQkMsSUFBSVAsSUFBSVEsT0FBTyxDQUFDLGtCQUFrQixJQUFJUixJQUFJUyxNQUFNLENBQUNDLGFBQWE7SUFDaEU7QUFDRixFQUFFO0FBRUYsZ0JBQWdCO0FBQ1QsTUFBTUMsV0FBVyxDQUFDQyxPQUFjWjtJQUNyQyxNQUFNYSxXQUFXO1FBQ2ZDLFNBQVNGLE1BQU1FLE9BQU87UUFDdEIvQixPQUFPNkIsTUFBTTdCLEtBQUs7UUFDbEJnQyxNQUFNSCxNQUFNRyxJQUFJO0lBQ2xCO0lBRUEsSUFBSWYsS0FBSztRQUNQZ0IsT0FBT0MsTUFBTSxDQUFDSixVQUFVZCxXQUFXQztJQUNyQztJQUVBLE9BQU9hO0FBQ1QsRUFBRTtBQUVLLE1BQU1LLG1CQUFtQixDQUM5QkMsT0FDQW5CLEtBQ0FvQixVQUFtQyxDQUFDLENBQUM7SUFFckNuQyxPQUFPb0MsSUFBSSxDQUFDO1FBQ1ZQLFNBQVNLO1FBQ1QsR0FBR0MsT0FBTztRQUNWRSxNQUFNdEIsSUFBSUUsR0FBRztRQUNiRCxRQUFRRCxJQUFJQyxNQUFNO1FBQ2xCTSxJQUFJUCxJQUFJUSxPQUFPLENBQUMsa0JBQWtCLElBQUlSLElBQUlTLE1BQU0sQ0FBQ0MsYUFBYTtJQUNoRTtBQUNGLEVBQUU7QUFFRixnQkFBZ0I7QUFDRSIsInNvdXJjZXMiOlsid2VicGFjazovL2VkdWNhdGlvbmFsLXBsYXRmb3JtLy4vc3JjL2xpYi9sb2dnZXIudHM/YjQ5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHdpbnN0b24gZnJvbSAnd2luc3Rvbic7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICd3aW5zdG9uJztcblxuLy8gTG9nIGZvcm1hdFxuY29uc3QgbG9nRm9ybWF0ID0gd2luc3Rvbi5mb3JtYXQuY29tYmluZShcbiAgd2luc3Rvbi5mb3JtYXQudGltZXN0YW1wKCksXG4gIHdpbnN0b24uZm9ybWF0LmVycm9ycyh7IHN0YWNrOiB0cnVlIH0pLFxuICB3aW5zdG9uLmZvcm1hdC5qc29uKClcbik7XG5cbi8vIENyZWF0ZSBsb2dnZXIgaW5zdGFuY2VcbmNvbnN0IGxvZ2dlciA9IHdpbnN0b24uY3JlYXRlTG9nZ2VyKHtcbiAgbGV2ZWw6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnaW5mbycgOiAnZGVidWcnLFxuICBmb3JtYXQ6IGxvZ0Zvcm1hdCxcbiAgZGVmYXVsdE1ldGE6IHsgc2VydmljZTogJ2FwaScgfSxcbiAgdHJhbnNwb3J0czogW1xuICAgIC8vIFdyaXRlIGFsbCBsb2dzIHRvIGNvbnNvbGVcbiAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkNvbnNvbGUoe1xuICAgICAgZm9ybWF0OiB3aW5zdG9uLmZvcm1hdC5jb21iaW5lKFxuICAgICAgICB3aW5zdG9uLmZvcm1hdC5jb2xvcml6ZSgpLFxuICAgICAgICB3aW5zdG9uLmZvcm1hdC5zaW1wbGUoKVxuICAgICAgKVxuICAgIH0pLFxuICAgIC8vIFdyaXRlIGFsbCBsb2dzIHdpdGggbGV2ZWwgJ2Vycm9yJyBhbmQgYmVsb3cgdG8gZXJyb3IubG9nXG4gICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5GaWxlKHtcbiAgICAgIGZpbGVuYW1lOiAnbG9ncy9lcnJvci5sb2cnLFxuICAgICAgbGV2ZWw6ICdlcnJvcicsXG4gICAgICBtYXhzaXplOiA1MjQyODgwLCAvLyA1TUJcbiAgICAgIG1heEZpbGVzOiA1XG4gICAgfSksXG4gICAgLy8gV3JpdGUgYWxsIGxvZ3Mgd2l0aCBsZXZlbCAnaW5mbycgYW5kIGJlbG93IHRvIGNvbWJpbmVkLmxvZ1xuICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuRmlsZSh7XG4gICAgICBmaWxlbmFtZTogJ2xvZ3MvY29tYmluZWQubG9nJyxcbiAgICAgIG1heHNpemU6IDUyNDI4ODAsIC8vIDVNQlxuICAgICAgbWF4RmlsZXM6IDVcbiAgICB9KVxuICBdXG59KTtcblxuLy8gUmVxdWVzdCBsb2dnaW5nXG5leHBvcnQgY29uc3QgbG9nUmVxdWVzdCA9IChyZXE6IE5leHRBcGlSZXF1ZXN0KSA9PiB7XG4gIHJldHVybiB7XG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgIHVybDogcmVxLnVybCxcbiAgICBxdWVyeTogcmVxLnF1ZXJ5LFxuICAgIGJvZHk6IHJlcS5ib2R5LFxuICAgIHVzZXI6IHJlcS51c2VyPy5pZCxcbiAgICBpcDogcmVxLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddIHx8IHJlcS5zb2NrZXQucmVtb3RlQWRkcmVzc1xuICB9O1xufTtcblxuLy8gRXJyb3IgbG9nZ2luZ1xuZXhwb3J0IGNvbnN0IGxvZ0Vycm9yID0gKGVycm9yOiBFcnJvciwgcmVxPzogTmV4dEFwaVJlcXVlc3QpID0+IHtcbiAgY29uc3QgZXJyb3JMb2cgPSB7XG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICBzdGFjazogZXJyb3Iuc3RhY2ssXG4gICAgbmFtZTogZXJyb3IubmFtZVxuICB9O1xuXG4gIGlmIChyZXEpIHtcbiAgICBPYmplY3QuYXNzaWduKGVycm9yTG9nLCBsb2dSZXF1ZXN0KHJlcSkpO1xuICB9XG5cbiAgcmV0dXJuIGVycm9yTG9nO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvZ1NlY3VyaXR5RXZlbnQgPSAoXG4gIGV2ZW50OiBzdHJpbmcsXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIGRldGFpbHM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge31cbikgPT4ge1xuICBsb2dnZXIud2Fybih7XG4gICAgbWVzc2FnZTogZXZlbnQsXG4gICAgLi4uZGV0YWlscyxcbiAgICBwYXRoOiByZXEudXJsLFxuICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICBpcDogcmVxLmhlYWRlcnNbJ3gtZm9yd2FyZGVkLWZvciddIHx8IHJlcS5zb2NrZXQucmVtb3RlQWRkcmVzc1xuICB9KTtcbn07XG5cbi8vIEV4cG9ydCBsb2dnZXJcbmV4cG9ydCB7IGxvZ2dlciB9OyAiXSwibmFtZXMiOlsid2luc3RvbiIsImxvZ0Zvcm1hdCIsImZvcm1hdCIsImNvbWJpbmUiLCJ0aW1lc3RhbXAiLCJlcnJvcnMiLCJzdGFjayIsImpzb24iLCJsb2dnZXIiLCJjcmVhdGVMb2dnZXIiLCJsZXZlbCIsInByb2Nlc3MiLCJkZWZhdWx0TWV0YSIsInNlcnZpY2UiLCJ0cmFuc3BvcnRzIiwiQ29uc29sZSIsImNvbG9yaXplIiwic2ltcGxlIiwiRmlsZSIsImZpbGVuYW1lIiwibWF4c2l6ZSIsIm1heEZpbGVzIiwibG9nUmVxdWVzdCIsInJlcSIsIm1ldGhvZCIsInVybCIsInF1ZXJ5IiwiYm9keSIsInVzZXIiLCJpZCIsImlwIiwiaGVhZGVycyIsInNvY2tldCIsInJlbW90ZUFkZHJlc3MiLCJsb2dFcnJvciIsImVycm9yIiwiZXJyb3JMb2ciLCJtZXNzYWdlIiwibmFtZSIsIk9iamVjdCIsImFzc2lnbiIsImxvZ1NlY3VyaXR5RXZlbnQiLCJldmVudCIsImRldGFpbHMiLCJ3YXJuIiwicGF0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/logger.ts\n");

/***/ }),

/***/ "(api)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n// Test database connection\nprisma.$connect().then(()=>{\n    console.log(\"Successfully connected to database\");\n}).catch((error)=>{\n    console.error(\"Failed to connect to database:\", error);\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRztBQUVuRSxJQUFJSSxJQUF5QixFQUFjO0lBQ3pDSCxnQkFBZ0JFLE1BQU0sR0FBR0E7QUFDM0I7QUFFQSwyQkFBMkI7QUFDM0JBLE9BQU9FLFFBQVEsR0FDWkMsSUFBSSxDQUFDO0lBQ0pDLFFBQVFDLEdBQUcsQ0FBQztBQUNkLEdBQ0NDLEtBQUssQ0FBQyxDQUFDQztJQUNOSCxRQUFRRyxLQUFLLENBQUMsa0NBQWtDQTtBQUNsRCIsInNvdXJjZXMiOlsid2VicGFjazovL2VkdWNhdGlvbmFsLXBsYXRmb3JtLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCgpO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hO1xufVxuXG4vLyBUZXN0IGRhdGFiYXNlIGNvbm5lY3Rpb25cbnByaXNtYS4kY29ubmVjdCgpXG4gIC50aGVuKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byBkYXRhYmFzZScpO1xuICB9KVxuICAuY2F0Y2goKGVycm9yOiBFcnJvcikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjb25uZWN0IHRvIGRhdGFiYXNlOicsIGVycm9yKTtcbiAgfSk7ICJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwicHJvY2VzcyIsIiRjb25uZWN0IiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/auth/[...nextauth].ts":
/*!*********************************************!*\
  !*** ./src/pages/api/auth/[...nextauth].ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"@next-auth/prisma-adapter\");\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/prisma */ \"(api)/./src/lib/prisma.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_auth_providers_linkedin__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next-auth/providers/linkedin */ \"next-auth/providers/linkedin\");\n/* harmony import */ var next_auth_providers_linkedin__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_linkedin__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\nconst authOptions = {\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_2__.PrismaAdapter)(_lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma),\n    providers: [\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default()({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"ایمیل\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"رمز عبور\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    throw new Error(\"لطفا ایمیل و رمز عبور را وارد کنید\");\n                }\n                const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findUnique({\n                    where: {\n                        email: credentials.email\n                    }\n                });\n                if (!user) {\n                    throw new Error(\"کاربری با این ایمیل یافت نشد\");\n                }\n                const isValid = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_4__.compare)(credentials.password, user.password);\n                if (!isValid) {\n                    throw new Error(\"رمز عبور اشتباه است\");\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    image: user.image,\n                    role: user.role\n                };\n            }\n        }),\n        next_auth_providers_google__WEBPACK_IMPORTED_MODULE_5___default()({\n            clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\"\n        }),\n        next_auth_providers_linkedin__WEBPACK_IMPORTED_MODULE_6___default()({\n            clientId: process.env.LINKEDIN_CLIENT_ID || \"\",\n            clientSecret: process.env.LINKEDIN_CLIENT_SECRET || \"\"\n        })\n    ],\n    session: {\n        strategy: \"jwt\"\n    },\n    pages: {\n        signIn: \"/auth/login\",\n        error: \"/auth/error\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.role = user.role;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (session.user) {\n                session.user.role = token.role;\n            }\n            return session;\n        }\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDaUM7QUFDUjtBQUNwQjtBQUNIO0FBRXFCO0FBQ0k7QUFFckQsTUFBTU8sY0FBK0I7SUFDMUNDLFNBQVNOLHdFQUFhQSxDQUFDQywrQ0FBTUE7SUFDN0JNLFdBQVc7UUFDVFIsc0VBQW1CQSxDQUFDO1lBQ2xCUyxNQUFNO1lBQ05DLGFBQWE7Z0JBQ1hDLE9BQU87b0JBQUVDLE9BQU87b0JBQVNDLE1BQU07Z0JBQVE7Z0JBQ3ZDQyxVQUFVO29CQUFFRixPQUFPO29CQUFZQyxNQUFNO2dCQUFXO1lBQ2xEO1lBQ0EsTUFBTUUsV0FBVUwsV0FBVztnQkFDekIsSUFBSSxDQUFDQSxhQUFhQyxTQUFTLENBQUNELGFBQWFJLFVBQVU7b0JBQ2pELE1BQU0sSUFBSUUsTUFBTTtnQkFDbEI7Z0JBRUEsTUFBTUMsT0FBTyxNQUFNZiwrQ0FBTUEsQ0FBQ2UsSUFBSSxDQUFDQyxVQUFVLENBQUM7b0JBQ3hDQyxPQUFPO3dCQUFFUixPQUFPRCxZQUFZQyxLQUFLO29CQUFDO2dCQUNwQztnQkFFQSxJQUFJLENBQUNNLE1BQU07b0JBQ1QsTUFBTSxJQUFJRCxNQUFNO2dCQUNsQjtnQkFFQSxNQUFNSSxVQUFVLE1BQU1qQixpREFBT0EsQ0FBQ08sWUFBWUksUUFBUSxFQUFFRyxLQUFLSCxRQUFRO2dCQUVqRSxJQUFJLENBQUNNLFNBQVM7b0JBQ1osTUFBTSxJQUFJSixNQUFNO2dCQUNsQjtnQkFFQSxPQUFPO29CQUNMSyxJQUFJSixLQUFLSSxFQUFFO29CQUNYVixPQUFPTSxLQUFLTixLQUFLO29CQUNqQkYsTUFBTVEsS0FBS1IsSUFBSTtvQkFDZmEsT0FBT0wsS0FBS0ssS0FBSztvQkFDakJDLE1BQU1OLEtBQUtNLElBQUk7Z0JBQ2pCO1lBQ0Y7UUFDRjtRQUNBbkIsaUVBQWNBLENBQUM7WUFDYm9CLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsZ0JBQWdCLElBQUk7WUFDMUNDLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ0csb0JBQW9CLElBQUk7UUFDcEQ7UUFDQXhCLG1FQUFnQkEsQ0FBQztZQUNmbUIsVUFBVUMsUUFBUUMsR0FBRyxDQUFDSSxrQkFBa0IsSUFBSTtZQUM1Q0YsY0FBY0gsUUFBUUMsR0FBRyxDQUFDSyxzQkFBc0IsSUFBSTtRQUN0RDtLQUNEO0lBQ0RDLFNBQVM7UUFDUEMsVUFBVTtJQUNaO0lBQ0FDLE9BQU87UUFDTEMsUUFBUTtRQUNSQyxPQUFPO0lBQ1Q7SUFDQUMsV0FBVztRQUNULE1BQU1DLEtBQUksRUFBRUMsS0FBSyxFQUFFdEIsSUFBSSxFQUFFO1lBQ3ZCLElBQUlBLE1BQU07Z0JBQ1JzQixNQUFNaEIsSUFBSSxHQUFHTixLQUFLTSxJQUFJO1lBQ3hCO1lBQ0EsT0FBT2dCO1FBQ1Q7UUFDQSxNQUFNUCxTQUFRLEVBQUVBLE9BQU8sRUFBRU8sS0FBSyxFQUFFO1lBQzlCLElBQUlQLFFBQVFmLElBQUksRUFBRTtnQkFDaEJlLFFBQVFmLElBQUksQ0FBQ00sSUFBSSxHQUFHZ0IsTUFBTWhCLElBQUk7WUFDaEM7WUFDQSxPQUFPUztRQUNUO0lBQ0Y7QUFDRixFQUFFO0FBRUYsaUVBQWVqQyxnREFBUUEsQ0FBQ08sWUFBWUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2VkdWNhdGlvbmFsLXBsYXRmb3JtLy4vc3JjL3BhZ2VzL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0udHM/NTBhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTmV4dEF1dGggZnJvbSAnbmV4dC1hdXRoJztcclxuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFscyc7XHJcbmltcG9ydCB7IFByaXNtYUFkYXB0ZXIgfSBmcm9tICdAbmV4dC1hdXRoL3ByaXNtYS1hZGFwdGVyJztcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiO1xyXG5pbXBvcnQgeyBjb21wYXJlIH0gZnJvbSAnYmNyeXB0anMnO1xyXG5pbXBvcnQgeyBOZXh0QXV0aE9wdGlvbnMgfSBmcm9tICduZXh0LWF1dGgnO1xyXG5pbXBvcnQgR29vZ2xlUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9nb29nbGUnO1xyXG5pbXBvcnQgTGlua2VkSW5Qcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2xpbmtlZGluJztcclxuXHJcbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9uczogTmV4dEF1dGhPcHRpb25zID0ge1xyXG4gIGFkYXB0ZXI6IFByaXNtYUFkYXB0ZXIocHJpc21hKSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xyXG4gICAgICBuYW1lOiAnQ3JlZGVudGlhbHMnLFxyXG4gICAgICBjcmVkZW50aWFsczoge1xyXG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiBcItin24zZhduM2YRcIiwgdHlwZTogXCJlbWFpbFwiIH0sXHJcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6IFwi2LHZhdiyINi52KjZiNixXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xyXG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign2YTYt9mB2Kcg2KfbjNmF24zZhCDZiCDYsdmF2LIg2LnYqNmI2LEg2LHYpyDZiNin2LHYryDaqdmG24zYrycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ9qp2KfYsdio2LHbjCDYqNinINin24zZhiDYp9uM2YXbjNmEINuM2KfZgdiqINmG2LTYrycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IGNvbXBhcmUoY3JlZGVudGlhbHMucGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xyXG5cclxuICAgICAgICBpZiAoIWlzVmFsaWQpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcign2LHZhdiyINi52KjZiNixINin2LTYqtio2KfZhyDYp9iz2KonKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBpZDogdXNlci5pZCxcclxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxyXG4gICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxyXG4gICAgICAgICAgaW1hZ2U6IHVzZXIuaW1hZ2UsXHJcbiAgICAgICAgICByb2xlOiB1c2VyLnJvbGUgYXMgJ0FETUlOJyB8ICdVU0VSJ1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH0pLFxyXG4gICAgR29vZ2xlUHJvdmlkZXIoe1xyXG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCB8fCAnJyxcclxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCB8fCAnJ1xyXG4gICAgfSksXHJcbiAgICBMaW5rZWRJblByb3ZpZGVyKHtcclxuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkxJTktFRElOX0NMSUVOVF9JRCB8fCAnJyxcclxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5MSU5LRURJTl9DTElFTlRfU0VDUkVUIHx8ICcnXHJcbiAgICB9KVxyXG4gIF0sXHJcbiAgc2Vzc2lvbjoge1xyXG4gICAgc3RyYXRlZ3k6ICdqd3QnXHJcbiAgfSxcclxuICBwYWdlczoge1xyXG4gICAgc2lnbkluOiAnL2F1dGgvbG9naW4nLFxyXG4gICAgZXJyb3I6ICcvYXV0aC9lcnJvcicsXHJcbiAgfSxcclxuICBjYWxsYmFja3M6IHtcclxuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyIH0pIHtcclxuICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICB0b2tlbi5yb2xlID0gdXNlci5yb2xlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0b2tlbjtcclxuICAgIH0sXHJcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xyXG4gICAgICBpZiAoc2Vzc2lvbi51c2VyKSB7XHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLnJvbGUgPSB0b2tlbi5yb2xlIGFzICdBRE1JTicgfCAnVVNFUic7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNlc3Npb247XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTmV4dEF1dGgoYXV0aE9wdGlvbnMpOyAiXSwibmFtZXMiOlsiTmV4dEF1dGgiLCJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiUHJpc21hQWRhcHRlciIsInByaXNtYSIsImNvbXBhcmUiLCJHb29nbGVQcm92aWRlciIsIkxpbmtlZEluUHJvdmlkZXIiLCJhdXRoT3B0aW9ucyIsImFkYXB0ZXIiLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwiRXJyb3IiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaXNWYWxpZCIsImlkIiwiaW1hZ2UiLCJyb2xlIiwiY2xpZW50SWQiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwiTElOS0VESU5fQ0xJRU5UX0lEIiwiTElOS0VESU5fQ0xJRU5UX1NFQ1JFVCIsInNlc3Npb24iLCJzdHJhdGVneSIsInBhZ2VzIiwic2lnbkluIiwiZXJyb3IiLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/news/index.ts":
/*!*************************************!*\
  !*** ./src/pages/api/news/index.ts ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(api)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/logger */ \"(api)/./src/lib/logger.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/pages/api/auth/[...nextauth] */ \"(api)/./src/pages/api/auth/[...nextauth].ts\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ \"uuid\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_2__, uuid__WEBPACK_IMPORTED_MODULE_7__]);\n([zod__WEBPACK_IMPORTED_MODULE_2__, uuid__WEBPACK_IMPORTED_MODULE_7__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nconst newsSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n    title: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().min(3, \"عنوان خبر باید حداقل ۳ کاراکتر باشد\"),\n    content: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().min(10, \"متن خبر باید حداقل ۱۰ کاراکتر باشد\"),\n    summary: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n    date: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().or(zod__WEBPACK_IMPORTED_MODULE_2__.z.date()).refine((val)=>!isNaN(new Date(val).getTime()), {\n        message: \"تاریخ نامعتبر است\"\n    }),\n    author: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().min(2, \"نام نویسنده الزامی است\"),\n    category: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().min(2, \"دسته‌بندی الزامی است\"),\n    images: zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional(),\n    published: zod__WEBPACK_IMPORTED_MODULE_2__.z.boolean().optional().default(false),\n    publishedAt: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().or(zod__WEBPACK_IMPORTED_MODULE_2__.z.date()).optional()\n});\nasync function handler(req, res) {\n    switch(req.method){\n        case \"GET\":\n            try {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(\"Fetching all news\", req);\n                const { page = \"1\", limit = \"10\", search, category, published } = req.query;\n                const pageNum = parseInt(page) || 1;\n                const limitNum = parseInt(limit) || 10;\n                const skip = (pageNum - 1) * limitNum;\n                // Build where clause\n                const where = {};\n                if (search) {\n                    where.OR = [\n                        {\n                            title: {\n                                contains: search,\n                                mode: \"insensitive\"\n                            }\n                        },\n                        {\n                            content: {\n                                contains: search,\n                                mode: \"insensitive\"\n                            }\n                        },\n                        {\n                            author: {\n                                contains: search,\n                                mode: \"insensitive\"\n                            }\n                        }\n                    ];\n                }\n                if (category) {\n                    where.category = category;\n                }\n                if (published !== undefined) {\n                    where.published = published === \"true\";\n                }\n                const [news, total] = await Promise.all([\n                    _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.news.findMany({\n                        where,\n                        orderBy: {\n                            date: \"desc\"\n                        },\n                        skip,\n                        take: limitNum,\n                        include: {\n                            images: true\n                        }\n                    }),\n                    _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.news.count({\n                        where\n                    })\n                ]);\n                _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Successfully fetched ${news.length} news items`, req);\n                const response = {\n                    success: true,\n                    data: {\n                        items: news,\n                        pagination: {\n                            total,\n                            currentPage: pageNum,\n                            limit: limitNum,\n                            totalPages: Math.ceil(total / limitNum)\n                        }\n                    }\n                };\n                return res.status(200).json({\n                    success: true,\n                    data: response\n                });\n            } catch (error) {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error fetching news\", error, req);\n                return res.status(500).json({\n                    success: false,\n                    error: {\n                        message: \"خطا در دریافت اخبار\",\n                        code: \"INTERNAL_SERVER_ERROR\"\n                    }\n                });\n            }\n            break;\n        case \"POST\":\n            // اضافه کردن چک سشن و نقش\n            const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_3__.getServerSession)(req, res, _pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_4__.authOptions);\n            if (!session || session.user.role !== \"ADMIN\") {\n                return res.status(401).json({\n                    success: false,\n                    error: {\n                        message: \"دسترسی غیرمجاز\",\n                        code: \"UNAUTHORIZED\"\n                    }\n                });\n            }\n            let createdFiles = [];\n            try {\n                _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(\"Creating new news item\", req);\n                const validation = newsSchema.safeParse(req.body);\n                if (!validation.success) {\n                    return res.status(400).json({\n                        success: false,\n                        error: {\n                            message: \"داده‌های ارسالی نامعتبر است\",\n                            code: \"VALIDATION_ERROR\",\n                            details: validation.error.errors.map((e)=>e.message)\n                        }\n                    });\n                }\n                const data = validation.data;\n                let order = 0;\n                createdFiles = [];\n                const newsData = {\n                    title: data.title,\n                    content: data.content,\n                    summary: data.summary,\n                    date: new Date(data.date),\n                    author: data.author,\n                    category: data.category,\n                    published: data.published || false\n                };\n                if (data.published && data.publishedAt) {\n                    newsData.publishedAt = new Date(data.publishedAt);\n                } else if (data.published) {\n                    newsData.publishedAt = new Date();\n                }\n                // ذخیره عکس‌ها (base64 یا لینک) با اعتبارسنجی حجم و تراکنش\n                const images = data.images || [];\n                let newsWithImages = null;\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.$transaction(async (tx)=>{\n                    // ابتدا خبر را ایجاد کن\n                    const newsItem = await tx.news.create({\n                        data: newsData\n                    });\n                    for (const img of images){\n                        let url = img;\n                        if (typeof img === \"string\" && img.startsWith(\"data:image/\")) {\n                            const matches = /^data:(image\\/jpeg|image\\/png);base64,/.exec(img);\n                            if (!matches) continue;\n                            const ext = matches[1] === \"image/png\" ? \"png\" : \"jpg\";\n                            const base64Data = img.split(\",\")[1];\n                            // اعتبارسنجی حجم (حداکثر ۲ مگابایت)\n                            const fileSize = Buffer.byteLength(base64Data, \"base64\");\n                            if (fileSize > 2 * 1024 * 1024) {\n                                throw new Error(\"حجم هر عکس نباید بیشتر از ۲ مگابایت باشد\");\n                            }\n                            const filename = `${(0,uuid__WEBPACK_IMPORTED_MODULE_7__.v4)()}.${ext}`;\n                            const filePath = path__WEBPACK_IMPORTED_MODULE_6___default().join(process.cwd(), \"public\", \"uploads\", filename);\n                            await fs__WEBPACK_IMPORTED_MODULE_5___default().promises.writeFile(filePath, Buffer.from(base64Data, \"base64\"));\n                            createdFiles.push(filePath);\n                            url = `/uploads/${filename}`;\n                        }\n                        await tx.newsImage.create({\n                            data: {\n                                url,\n                                newsId: newsItem.id,\n                                order: order++\n                            }\n                        });\n                    }\n                    // پس از ایجاد خبر و تصاویر، خبر را با تصاویرش واکشی کن\n                    newsWithImages = await tx.news.findUnique({\n                        where: {\n                            id: newsItem.id\n                        },\n                        include: {\n                            images: true\n                        }\n                    });\n                });\n                _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.info(`Successfully created news item with transaction`, req);\n                return res.status(201).json({\n                    success: true,\n                    data: newsWithImages\n                });\n            } catch (error) {\n                // اگر فایل فیزیکی ایجاد شده اما تراکنش شکست خورد، فایل‌ها را حذف کن\n                if (typeof createdFiles !== \"undefined\" && Array.isArray(createdFiles)) {\n                    for (const filePath of createdFiles){\n                        try {\n                            if (fs__WEBPACK_IMPORTED_MODULE_5___default().existsSync(filePath)) fs__WEBPACK_IMPORTED_MODULE_5___default().unlinkSync(filePath);\n                        } catch  {}\n                    }\n                }\n                _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.error(\"Error creating news item (transaction)\", error, req);\n                const msg = error instanceof Error && error.message.includes(\"۲ مگابایت\") ? \"حجم هر عکس نباید بیشتر از ۲ مگابایت باشد\" : \"خطا در ایجاد خبر\";\n                return res.status(500).json({\n                    success: false,\n                    error: {\n                        message: msg,\n                        code: \"INTERNAL_SERVER_ERROR\"\n                    }\n                });\n            }\n            break;\n        default:\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__.logger.warn(`Method ${req.method} not allowed`, req);\n            res.setHeader(\"Allow\", [\n                \"GET\",\n                \"POST\"\n            ]);\n            return res.status(405).json({\n                success: false,\n                error: {\n                    message: `Method ${req.method} Not Allowed`,\n                    code: \"METHOD_NOT_ALLOWED\"\n                }\n            });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cGFnZXMvYXBpL25ld3MvaW5kZXgudHM/ODJkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL2xpYi9sb2dnZXInO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnQC9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdJztcblxuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgdHlwZSB7IFBhZ2luYXRlZFJlc3BvbnNlIH0gZnJvbSAnQC90eXBlcy9hcGknO1xuXG5jb25zdCBuZXdzU2NoZW1hID0gei5vYmplY3Qoe1xuICB0aXRsZTogei5zdHJpbmcoKS5taW4oMywgJ9i52YbZiNin2YYg2K7YqNixINio2KfbjNivINit2K/Yp9mC2YQg27Mg2qnYp9ix2Kfaqdiq2LEg2KjYp9i02K8nKSxcbiAgY29udGVudDogei5zdHJpbmcoKS5taW4oMTAsICfZhdiq2YYg2K7YqNixINio2KfbjNivINit2K/Yp9mC2YQg27HbsCDaqdin2LHYp9qp2KrYsSDYqNin2LTYrycpLFxuICBzdW1tYXJ5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGRhdGU6IHouc3RyaW5nKCkub3Ioei5kYXRlKCkpLnJlZmluZSh2YWwgPT4gIWlzTmFOKG5ldyBEYXRlKHZhbCkuZ2V0VGltZSgpKSwgeyBtZXNzYWdlOiAn2KrYp9ix24zYriDZhtin2YXYudiq2KjYsSDYp9iz2KonIH0pLFxuICBhdXRob3I6IHouc3RyaW5nKCkubWluKDIsICfZhtin2YUg2YbZiNuM2LPZhtiv2Ycg2KfZhNiy2KfZhduMINin2LPYqicpLFxuICBjYXRlZ29yeTogei5zdHJpbmcoKS5taW4oMiwgJ9iv2LPYqtmH4oCM2KjZhtiv24wg2KfZhNiy2KfZhduMINin2LPYqicpLFxuICBpbWFnZXM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSwgLy8g2KLYsdin24zZhyDYudqp2LPigIzZh9inIChiYXNlNjQg24zYpyDZhNuM2YbaqSlcbiAgcHVibGlzaGVkOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLmRlZmF1bHQoZmFsc2UpLFxuICBwdWJsaXNoZWRBdDogei5zdHJpbmcoKS5vcih6LmRhdGUoKSkub3B0aW9uYWwoKSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIHN3aXRjaCAocmVxLm1ldGhvZCkge1xuICAgIGNhc2UgJ0dFVCc6XG4gICAgICB0cnkge1xuICAgICAgICBsb2dnZXIuaW5mbygnRmV0Y2hpbmcgYWxsIG5ld3MnLCByZXEpO1xuICAgICAgICBjb25zdCB7IHBhZ2UgPSAnMScsIGxpbWl0ID0gJzEwJywgc2VhcmNoLCBjYXRlZ29yeSwgcHVibGlzaGVkIH0gPSByZXEucXVlcnk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwYWdlTnVtID0gcGFyc2VJbnQocGFnZSBhcyBzdHJpbmcpIHx8IDE7XG4gICAgICAgIGNvbnN0IGxpbWl0TnVtID0gcGFyc2VJbnQobGltaXQgYXMgc3RyaW5nKSB8fCAxMDtcbiAgICAgICAgY29uc3Qgc2tpcCA9IChwYWdlTnVtIC0gMSkgKiBsaW1pdE51bTtcbiAgICAgICAgXG4gICAgICAgIC8vIEJ1aWxkIHdoZXJlIGNsYXVzZVxuICAgICAgICBjb25zdCB3aGVyZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7fTtcbiAgICAgICAgaWYgKHNlYXJjaCkge1xuICAgICAgICAgIHdoZXJlLk9SID0gW1xuICAgICAgICAgICAgeyB0aXRsZTogeyBjb250YWluczogc2VhcmNoIGFzIHN0cmluZywgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgICAgICB7IGNvbnRlbnQ6IHsgY29udGFpbnM6IHNlYXJjaCBhcyBzdHJpbmcsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICAgICAgeyBhdXRob3I6IHsgY29udGFpbnM6IHNlYXJjaCBhcyBzdHJpbmcsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhdGVnb3J5KSB7XG4gICAgICAgICAgd2hlcmUuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHVibGlzaGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB3aGVyZS5wdWJsaXNoZWQgPSBwdWJsaXNoZWQgPT09ICd0cnVlJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgW25ld3MsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICBwcmlzbWEubmV3cy5maW5kTWFueSh7XG4gICAgICAgICAgICB3aGVyZSxcbiAgICAgICAgICAgIG9yZGVyQnk6IHsgZGF0ZTogJ2Rlc2MnIH0sXG4gICAgICAgICAgICBza2lwLFxuICAgICAgICAgICAgdGFrZTogbGltaXROdW0sXG4gICAgICAgICAgICBpbmNsdWRlOiB7IGltYWdlczogdHJ1ZSB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHByaXNtYS5uZXdzLmNvdW50KHsgd2hlcmUgfSlcbiAgICAgICAgXSk7XG4gICAgICAgIFxuICAgICAgICBsb2dnZXIuaW5mbyhgU3VjY2Vzc2Z1bGx5IGZldGNoZWQgJHtuZXdzLmxlbmd0aH0gbmV3cyBpdGVtc2AsIHJlcSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlOiBQYWdpbmF0ZWRSZXNwb25zZTx0eXBlb2YgbmV3c1swXT4gPSB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBpdGVtczogbmV3cyxcbiAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgdG90YWwsXG4gICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBwYWdlTnVtLFxuICAgICAgICAgICAgICBsaW1pdDogbGltaXROdW0sXG4gICAgICAgICAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0TnVtKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHJlc3BvbnNlXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBmZXRjaGluZyBuZXdzJywgZXJyb3IsIHJlcSk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBtZXNzYWdlOiAn2K7Yt9inINiv2LEg2K/YsduM2KfZgdiqINin2K7YqNin2LEnLCBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyB9IH0pO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdQT1NUJzpcbiAgICAgIC8vINin2LbYp9mB2Ycg2qnYsdiv2YYg2obaqSDYs9i02YYg2Ygg2YbZgti0XG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcywgYXV0aE9wdGlvbnMpO1xuICAgICAgaWYgKCFzZXNzaW9uIHx8IHNlc3Npb24udXNlci5yb2xlICE9PSAnQURNSU4nKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogeyBtZXNzYWdlOiAn2K/Ys9iq2LHYs9uMINi624zYsdmF2KzYp9iyJywgY29kZTogJ1VOQVVUSE9SSVpFRCcgfSB9KTtcbiAgICAgIH1cbiAgICAgIGxldCBjcmVhdGVkRmlsZXM6IHN0cmluZ1tdID0gW107XG4gICAgICB0cnkge1xuICAgICAgICBsb2dnZXIuaW5mbygnQ3JlYXRpbmcgbmV3IG5ld3MgaXRlbScsIHJlcSk7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBuZXdzU2NoZW1hLnNhZmVQYXJzZShyZXEuYm9keSk7XG4gICAgICAgIGlmICghdmFsaWRhdGlvbi5zdWNjZXNzKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB7IG1lc3NhZ2U6ICfYr9in2K/Zh+KAjNmH2KfbjCDYp9ix2LPYp9mE24wg2YbYp9mF2LnYqtio2LEg2KfYs9iqJywgY29kZTogJ1ZBTElEQVRJT05fRVJST1InLCBkZXRhaWxzOiB2YWxpZGF0aW9uLmVycm9yLmVycm9ycy5tYXAoZSA9PiBlLm1lc3NhZ2UpIH0gfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YSA9IHZhbGlkYXRpb24uZGF0YTtcbiAgICAgICAgbGV0IG9yZGVyID0gMDtcbiAgICAgICAgY3JlYXRlZEZpbGVzID0gW107XG4gICAgICAgIGNvbnN0IG5ld3NEYXRhOiB7XG4gICAgICAgICAgdGl0bGU6IHN0cmluZztcbiAgICAgICAgICBjb250ZW50OiBzdHJpbmc7XG4gICAgICAgICAgc3VtbWFyeT86IHN0cmluZztcbiAgICAgICAgICBkYXRlOiBEYXRlO1xuICAgICAgICAgIGF1dGhvcjogc3RyaW5nO1xuICAgICAgICAgIGNhdGVnb3J5OiBzdHJpbmc7XG4gICAgICAgICAgcHVibGlzaGVkOiBib29sZWFuO1xuICAgICAgICAgIHB1Ymxpc2hlZEF0PzogRGF0ZTtcbiAgICAgICAgfSA9IHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBkYXRhLmNvbnRlbnQsXG4gICAgICAgICAgc3VtbWFyeTogZGF0YS5zdW1tYXJ5LFxuICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKGRhdGEuZGF0ZSksXG4gICAgICAgICAgYXV0aG9yOiBkYXRhLmF1dGhvcixcbiAgICAgICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcbiAgICAgICAgICBwdWJsaXNoZWQ6IGRhdGEucHVibGlzaGVkIHx8IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZGF0YS5wdWJsaXNoZWQgJiYgZGF0YS5wdWJsaXNoZWRBdCkge1xuICAgICAgICAgIG5ld3NEYXRhLnB1Ymxpc2hlZEF0ID0gbmV3IERhdGUoZGF0YS5wdWJsaXNoZWRBdCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5wdWJsaXNoZWQpIHtcbiAgICAgICAgICBuZXdzRGF0YS5wdWJsaXNoZWRBdCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8g2LDYrtuM2LHZhyDYudqp2LPigIzZh9inIChiYXNlNjQg24zYpyDZhNuM2YbaqSkg2KjYpyDYp9i52KrYqNin2LHYs9mG2KzbjCDYrdis2YUg2Ygg2KrYsdin2qnZhti0XG4gICAgICAgIGNvbnN0IGltYWdlczogc3RyaW5nW10gPSBkYXRhLmltYWdlcyB8fCBbXTtcbiAgICAgICAgbGV0IG5ld3NXaXRoSW1hZ2VzOiBBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIHByaXNtYS5uZXdzLmZpbmRVbmlxdWU+PiB8IG51bGwgPSBudWxsO1xuICAgICAgICBhd2FpdCBwcmlzbWEuJHRyYW5zYWN0aW9uKGFzeW5jICh0eCkgPT4ge1xuICAgICAgICAgIC8vINin2KjYqtiv2Kcg2K7YqNixINix2Kcg2KfbjNis2KfYryDaqdmGXG4gICAgICAgICAgY29uc3QgbmV3c0l0ZW0gPSBhd2FpdCB0eC5uZXdzLmNyZWF0ZSh7IGRhdGE6IG5ld3NEYXRhIH0pO1xuICAgICAgICAgIGZvciAoY29uc3QgaW1nIG9mIGltYWdlcykge1xuICAgICAgICAgICAgbGV0IHVybCA9IGltZztcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW1nID09PSAnc3RyaW5nJyAmJiBpbWcuc3RhcnRzV2l0aCgnZGF0YTppbWFnZS8nKSkge1xuICAgICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gL15kYXRhOihpbWFnZVxcL2pwZWd8aW1hZ2VcXC9wbmcpO2Jhc2U2NCwvLmV4ZWMoaW1nKTtcbiAgICAgICAgICAgICAgaWYgKCFtYXRjaGVzKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgY29uc3QgZXh0ID0gbWF0Y2hlc1sxXSA9PT0gJ2ltYWdlL3BuZycgPyAncG5nJyA6ICdqcGcnO1xuICAgICAgICAgICAgICBjb25zdCBiYXNlNjREYXRhID0gaW1nLnNwbGl0KCcsJylbMV07XG4gICAgICAgICAgICAgIC8vINin2LnYqtio2KfYsdiz2YbYrNuMINit2KzZhSAo2K3Yr9in2qnYq9ixINuyINmF2q/Yp9io2KfbjNiqKVxuICAgICAgICAgICAgICBjb25zdCBmaWxlU2l6ZSA9IEJ1ZmZlci5ieXRlTGVuZ3RoKGJhc2U2NERhdGEsICdiYXNlNjQnKTtcbiAgICAgICAgICAgICAgaWYgKGZpbGVTaXplID4gMiAqIDEwMjQgKiAxMDI0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfYrdis2YUg2YfYsSDYudqp2LMg2YbYqNin24zYryDYqNuM2LTYqtixINin2LIg27Ig2YXar9in2KjYp9uM2Kog2KjYp9i02K8nKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGAke3V1aWR2NCgpfS4ke2V4dH1gO1xuICAgICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ3VwbG9hZHMnLCBmaWxlbmFtZSk7XG4gICAgICAgICAgICAgIGF3YWl0IGZzLnByb21pc2VzLndyaXRlRmlsZShmaWxlUGF0aCwgQnVmZmVyLmZyb20oYmFzZTY0RGF0YSwgJ2Jhc2U2NCcpKTtcbiAgICAgICAgICAgICAgY3JlYXRlZEZpbGVzLnB1c2goZmlsZVBhdGgpO1xuICAgICAgICAgICAgICB1cmwgPSBgL3VwbG9hZHMvJHtmaWxlbmFtZX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdHgubmV3c0ltYWdlLmNyZWF0ZSh7XG4gICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgbmV3c0lkOiBuZXdzSXRlbS5pZCxcbiAgICAgICAgICAgICAgICBvcmRlcjogb3JkZXIrK1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8g2b7YsyDYp9iyINin24zYrNin2K8g2K7YqNixINmIINiq2LXYp9mI24zYsdiMINiu2KjYsSDYsdinINio2Kcg2KrYtdin2YjbjNix2LQg2YjYp9qp2LTbjCDaqdmGXG4gICAgICAgICAgbmV3c1dpdGhJbWFnZXMgPSBhd2FpdCB0eC5uZXdzLmZpbmRVbmlxdWUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IG5ld3NJdGVtLmlkIH0sXG4gICAgICAgICAgICBpbmNsdWRlOiB7IGltYWdlczogdHJ1ZSB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsb2dnZXIuaW5mbyhgU3VjY2Vzc2Z1bGx5IGNyZWF0ZWQgbmV3cyBpdGVtIHdpdGggdHJhbnNhY3Rpb25gLCByZXEpO1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBuZXdzV2l0aEltYWdlcyB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vINin2q/YsSDZgdin24zZhCDZgduM2LLbjNqp24wg2KfbjNis2KfYryDYtNiv2Ycg2KfZhdinINiq2LHYp9qp2YbYtCDYtNqp2LPYqiDYrtmI2LHYr9iMINmB2KfbjNmE4oCM2YfYpyDYsdinINit2LDZgSDaqdmGXG4gICAgICAgIGlmICh0eXBlb2YgY3JlYXRlZEZpbGVzICE9PSAndW5kZWZpbmVkJyAmJiBBcnJheS5pc0FycmF5KGNyZWF0ZWRGaWxlcykpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIGNyZWF0ZWRGaWxlcykge1xuICAgICAgICAgICAgdHJ5IHsgaWYgKGZzLmV4aXN0c1N5bmMoZmlsZVBhdGgpKSBmcy51bmxpbmtTeW5jKGZpbGVQYXRoKTsgfSBjYXRjaCB7fVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIG5ld3MgaXRlbSAodHJhbnNhY3Rpb24pJywgZXJyb3IsIHJlcSk7XG4gICAgICAgIGNvbnN0IG1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygn27Ig2YXar9in2KjYp9uM2KonKSA/ICfYrdis2YUg2YfYsSDYudqp2LMg2YbYqNin24zYryDYqNuM2LTYqtixINin2LIg27Ig2YXar9in2KjYp9uM2Kog2KjYp9i02K8nIDogJ9iu2LfYpyDYr9ixINin24zYrNin2K8g2K7YqNixJztcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB7IG1lc3NhZ2U6IG1zZywgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicgfSB9KTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGxvZ2dlci53YXJuKGBNZXRob2QgJHtyZXEubWV0aG9kfSBub3QgYWxsb3dlZGAsIHJlcSk7XG4gICAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnR0VUJywgJ1BPU1QnXSk7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHsgbWVzc2FnZTogYE1ldGhvZCAke3JlcS5tZXRob2R9IE5vdCBBbGxvd2VkYCwgY29kZTogJ01FVEhPRF9OT1RfQUxMT1dFRCcgfSB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsicHJpc21hIiwibG9nZ2VyIiwieiIsImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsImZzIiwicGF0aCIsInY0IiwidXVpZHY0IiwibmV3c1NjaGVtYSIsIm9iamVjdCIsInRpdGxlIiwic3RyaW5nIiwibWluIiwiY29udGVudCIsInN1bW1hcnkiLCJvcHRpb25hbCIsImRhdGUiLCJvciIsInJlZmluZSIsInZhbCIsImlzTmFOIiwiRGF0ZSIsImdldFRpbWUiLCJtZXNzYWdlIiwiYXV0aG9yIiwiY2F0ZWdvcnkiLCJpbWFnZXMiLCJhcnJheSIsInB1Ymxpc2hlZCIsImJvb2xlYW4iLCJkZWZhdWx0IiwicHVibGlzaGVkQXQiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwiaW5mbyIsInBhZ2UiLCJsaW1pdCIsInNlYXJjaCIsInF1ZXJ5IiwicGFnZU51bSIsInBhcnNlSW50IiwibGltaXROdW0iLCJza2lwIiwid2hlcmUiLCJPUiIsImNvbnRhaW5zIiwibW9kZSIsInVuZGVmaW5lZCIsIm5ld3MiLCJ0b3RhbCIsIlByb21pc2UiLCJhbGwiLCJmaW5kTWFueSIsIm9yZGVyQnkiLCJ0YWtlIiwiaW5jbHVkZSIsImNvdW50IiwibGVuZ3RoIiwicmVzcG9uc2UiLCJzdWNjZXNzIiwiZGF0YSIsIml0ZW1zIiwicGFnaW5hdGlvbiIsImN1cnJlbnRQYWdlIiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29kZSIsInNlc3Npb24iLCJ1c2VyIiwicm9sZSIsImNyZWF0ZWRGaWxlcyIsInZhbGlkYXRpb24iLCJzYWZlUGFyc2UiLCJib2R5IiwiZGV0YWlscyIsImVycm9ycyIsIm1hcCIsImUiLCJvcmRlciIsIm5ld3NEYXRhIiwibmV3c1dpdGhJbWFnZXMiLCIkdHJhbnNhY3Rpb24iLCJ0eCIsIm5ld3NJdGVtIiwiY3JlYXRlIiwiaW1nIiwidXJsIiwic3RhcnRzV2l0aCIsIm1hdGNoZXMiLCJleGVjIiwiZXh0IiwiYmFzZTY0RGF0YSIsInNwbGl0IiwiZmlsZVNpemUiLCJCdWZmZXIiLCJieXRlTGVuZ3RoIiwiRXJyb3IiLCJmaWxlbmFtZSIsImZpbGVQYXRoIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJwcm9taXNlcyIsIndyaXRlRmlsZSIsImZyb20iLCJwdXNoIiwibmV3c0ltYWdlIiwibmV3c0lkIiwiaWQiLCJmaW5kVW5pcXVlIiwiQXJyYXkiLCJpc0FycmF5IiwiZXhpc3RzU3luYyIsInVubGlua1N5bmMiLCJtc2ciLCJpbmNsdWRlcyIsIndhcm4iLCJzZXRIZWFkZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/news/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fnews&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cnews%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();